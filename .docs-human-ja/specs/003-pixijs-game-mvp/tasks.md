# 機能タスク: PixiJS Game MVP

**機能名**: PixiJS Game MVP
**日付**: 2026-02-01
**計画**: [specs/003-pixijs-game-mvp/plan.md](specs/003-pixijs-game-mvp/plan.md)
**仕様**: [specs/003-pixijs-game-mvp/spec.md](specs/003-pixijs-game-mvp/spec.md)

## 実装戦略

この機能はTest-Firstアプローチで最小限のPixiJSゲーム環境を確立します。基本的なキャンバスセットアップ、アプリケーション初期化、空のシーン構造に焦点を当てます。実装は憲法原則に従い、適切な懸念の分離と包括的なテストを行います。

## 依存関係グラフ

ユーザーストーリーの完了順序 (優先順位と依存関係に基づく):
- US1 (基本ゲームキャンバス表示) → US2 (PixiJSアプリケーション初期化) → US3 (空のゲームシーンセットアップ)
- US2はキャンバス要素のためにUS1に依存
- US3はアプリケーションインスタンスのためにUS2に依存

## 並列実行例

ユーザーストーリー毎:
- US1: 依存関係インストール後にすべてのタスクを並列実行可能
- US2: アプリケーションセットアップタスクを並列化可能
- US3: US2完了後にシーンのセットアップタスクを並列化可能

## Phase 1: セットアップタスク (プロジェクト初期化)

PixiJS基盤を確立するためのプロジェクト初期化タスク。

- [x] T001 PixiJS依存関係のインストール (pixi.js, @types/pixi.js)
- [x] T002 src/libs/game/ ディレクトリ構造の作成
- [x] T003 ゲーム関連スクリプトでのpackage.jsonの更新

## Phase 2: ユーザーストーリー 1 - 基本ゲームキャンバス表示 (優先度: P1)

**ストーリー目標**: すべてのゲームレンダリングの基盤となる空のゲームキャンバスを表示。

**独立テスト基準**: 正しい寸法でDOMにキャンバス要素が存在。

**テスト**:
- [x] T004 [US1] キャンバス要素作成のユニットテスト作成
- [x] T005 [US1] 正しいサイズでキャンバスがレンダリングされることを検証

**実装タスク**:
- [x] T006 [US1] src/pages/game.astroでゲームページ作成
- [x] T007 [P] [US1] src/components/astro/GameCanvas.tsxでGameCanvasコンポーネント作成
- [x] T008 [P] [US1] キャンバスDOM作成ロジックの実装
- [x] T009 [P] [US1] キャンバススタイリングとレスポンシブ動作の追加

## Phase 3: ユーザーストーリー 2 - PixiJSアプリケーション初期化 (優先度: P2)

**ストーリー目標**: 適切な設定でPixiJS Applicationを初期化し、キャンバスにアタッチ。

**独立テスト基準**: PixiJS Applicationインスタンスが作成され、tickerが実行中。

**テスト**:
- [x] T010 [US2] PixiJS Application作成のユニットテスト作成
- [x] T011 [US2] 設定でのアプリケーション初期化の検証
- [x] T012 [US2] 破棄時のアプリケーションクリーンアップのテスト

**実装タスク**:
- [x] T013 [P] [US2] src/libs/game/rendering/Renderer.tsでRendererクラス作成
- [x] T014 [P] [US2] Application設定ロジックの実装
- [x] T015 [P] [US2] Applicationへのキャンバスアタッチメント追加
- [x] T016 [P] [US2] 適切なクリーンアップとエラーハンドリングの実装

## Phase 4: ユーザーストーリー 3 - 空のゲームシーンセットアップ (優先度: P3)

**ストーリー目標**: 将来のゲームオブジェクトのための空のシーンコンテナをセットアップ。

**独立テスト基準**: シーンコンテナが作成され、アプリケーションステージにアタッチ。

**テスト**:
- [x] T017 [US3] Sceneコンテナ作成のユニットテスト作成
- [x] T018 [US3] アプリケーションステージへのシーンアタッチメントの検証

**実装タスク**:
- [x] T019 [P] [US3] src/libs/game/scenes/Scene.tsでSceneクラス作成
- [x] T020 [P] [US3] シーンコンテナ初期化の実装
- [x] T021 [P] [US3] アプリケーションステージへのシーンの追加
- [x] T022 [US3] src/libs/game/core/Game.tsでメインGameクラス作成

## Phase 5: 統合 & テスト

最終的な統合と包括的なテスト。

- [x] T023 完全なゲーム初期化の統合テスト作成
- [x] T024 ゲームページ読み込みのE2Eテスト追加
- [x] T025 ゲーム開発セットアップでのREADME更新
- [x] T026 60 FPS要件を満たすパフォーマンスの検証