# プロジェクト概要仕様

**プロジェクト名**: Traffic jam-reducing city-building web game  
**作成日**: 2026-01-24  
**ステータス**: Draft  

## プロジェクト概要

このプロジェクトは、ブラウザベースの2D都市建設ゲームで、渋滞解消に焦点を当て、最終的に経済物流ゲームへと進化することを目指しています。プレイヤーは住宅地、商業施設、工場、レジャー施設を含む都市を建設・管理し、物流、輸送、リソースフローを管理して都市運営を最適化し、渋滞を最小限に抑えます。

このゲームは、現実世界の都市計画の課題をシミュレートし、経済、輸送、インフラ管理の要素を組み込んでいます。完全にブラウザで動作するように設計されており、戦略やシミュレーションゲームに興味のあるプレイヤーにアクセスしやすく魅力的な体験を提供します。

## 主要機能の概要

- **都市建設と管理**: プレイヤーは道路沿いに住宅、店舗、工場、レジャー施設などのさまざまな建物を建設し、水道、電気、ガスなどのリソースを管理します。
- **物流と輸送**: 車両による生産、在庫管理、商品配布のシミュレーションで、鉄道、船舶、航空輸送のオプションを含む。地元供給/需要の不均衡が発生した場合の輸入/輸出メカニズムを含みます。
- **交通と渋滞の削減**: コアゲームプレイは輸送ルートとインフラの最適化を中心に、渋滞を減らし都市効率を向上させます。
- **経済シミュレーション**: 工場が商品を生産、店舗が販売、レジャー施設がサービスを提供し、サプライチェーンダイナミクスと経済バランスに焦点を当てます。
- **住民とビジネスシミュレーション**: 住民は住宅に住み、施設で働き、商品/サービスを消費し、ビジネスは在庫と雇用を管理します。
- **インフラユーティリティ**: 駐車場、自転車置き場などの施設を管理して都市移動をサポートします。

## 技術制約と要件

- **技術スタック**: PixiJS for 2D rendering, bitECS for ECS runtime, Bun for build/package management/unit tests, Cloudflare Pages for hosting, Astro as base framework, New Relic for error monitoring, Playwright for UI/E2E testing, IndexedDB for save data (no localStorage).
- **パフォーマンス**: スムーズなゲームプレイを確保するために60 FPSを目標。
- **ローカライズ**: 英語と日本語の言語をサポート。
- **セキュリティ**: HTTPS/TLS、CSP、CORS、入力検証、認証、レート制限を含むウェブセキュリティのベストプラクティスに従い、権威あるサーバーステート、アンチチート対策、プライバシー/データ最小化などのゲーム特有の考慮事項。
- **アーキテクチャ**: ソースコードは `src/` 下にあり、ページ、アプリブートストラップ、ライブラリ（機能、コア、インフラ、ユーティリティ）の構造化されたディレクトリ。
- **開発原則**: テストファースト（TDD）、統合テスト、ランタイムファースト思考、最小変更スコープ、コンテキストファースト設計に従う。ドキュメントは英語で、日本語訳は構造を模倣。

## 前提条件

- ゲームは必要な技術（例: PixiJSのWebGL、IndexedDB）をサポートするモダンなウェブブラウザで動作。
- Cloudflare Pagesでのホスティングのためにプレイヤーが安定したインターネット接続を持つ。
- ターゲットオーディエンスは都市計画と物流シミュレーションに興味のある戦略ゲーム愛好家を含む。
- サーバーサイドマルチプレイヤーなし; シングルプレイヤー体験で、将来の拡張の可能性あり。

## 成功基準

- サポートされるブラウザとデバイスで一貫した60 FPSパフォーマンスを実現。
- プレイヤーが機能的な都市を建設し、物流を効果的に管理できる魅力的なバランスの取れたゲームプレイループを提供。
- チーティングを防ぎ、公正なプレイを維持する高いセキュリティと整合性を確保。
- 正確な英語と日本語コンテンツでの成功したローカライズ。
- セッション時間、完了率、プレイヤー維持などの指標でゲームメカニクスに対する肯定的なユーザーフィードバックを示す、楽しみと挑戦バランスを示す。